platform5 {

  printer.pageOrientation = "portrait"
  printer.pageWidth = 100 // единица измерения - 1пункт или 1/72 дюйма
  printer.pageHeight = 200

  //настройка подключения к основному серверу platform5
  server.remote {
    enabled = true
    system = "platform5-system"
    //здесь поменять на адрес сервера
    host = "127.0.0.1"
    port = 8085
    //порт админки
    httpPort = 8000
  }

  chromeFullscreen = true

  terminal {

    accessControlEnabled = true //сканер вкл./выкл.

    printingEnabled = true //печать вкл./выкл.
    printerDevice = "Microsoft Print to PDF" //имя принтера для печати, взять из лога при запуске

    //параметры терминала для печати и кд
    autoLogin {
      enabled = true
      username = "reg"
      password = "reg"
      terminal = "P2out2"
    }

    config {
      //список ком портов для подключения сканеров
      devices = [{
        enabled = false
        name = "emulator"
        driverType = "serialport"
        parameters = {
          delay = 15000
          data = "496"
        }
      },
        {
        enabled = true
        name = "serialScanner"
        driverType = "serialport"
        parameters {
          port = "COM3"
          speed = 9600
        }
      },
        //считыватель UHF rfid меток RRU9890
        {
          enabled = false
          name = "rfid9809"
          driverType = "rfid9809"
          parameters {
            port = 5
            delay = 100 //интервал опроса карт, мс
            writeTimeout = 1000 //таймаут записси EPC, мс
          }
        },
        //Omnikey
        {
          enabled = false
          name = "omnikey"
          driverType = "omnikey"
          parameters {
            delay = 300
            portName = "OMNIKEY CardMan 5x21-CL 0"
          }
        },
      ]

      //формат обраотки данных сканера
      formats = [{
        name = "testFormat"
        driverType = "plain",
        parameters = {
          regexp: "[0-9]{10,10}([0-9]{14,14})[0-9]+$"
        }
      },
        {
          name = "plainFormat"
          driverType = "plain",
          parameters = {
          }
        }
      ]

      //тип реакции на сканирование
//      "redirect" ⇒ открыть анкету в админке(только при коннекте админки к терминалу)
//      "print" ⇒ печать
//      "check_badge" ⇒ контроль доступа
//      "assign_barcode" ⇒ назначить рфид
//      "open_and_assign" => открыть анкету и назначить рфид
      reactions = [{
        name = "Redirect"
        type = "redirect"
        parameters = {
          badgeTypeId = 2
        }
      },
        {
          name = "AssignBarcode"
          type = "assign_barcode"
          parameters = {
          }
        },
        {
          name = "CheckBadge"
          type = "check_badge"
          parameters = {
          }
        },
        {
          name = "OpenAndAssign"
          type = "open_and_assign"
          parameters = {
          }
        }
      ]

      //конфигурация сканеров
      scanners = [
        {
        name = "test1"
        device = "serialScanner" //имя из списка devices
        format = "testFormat" // формат из списка formats
        reaction = "Redirect" // реакция из списка reactions
        //дополнительные параметры
        parameters = {
          dataField = "72" //ид поля для поиска
          formId = "2"
          formList = ["49", "60"] //ид формы: ид поля
          badgeSearch = false //поиск по бейджу
        }
      },
        {
          name = "RFIDWriter"
          device = "rfid9809"
          format = "plainFormat" // формат из списка formats
          reaction = "AssignBarcode" // реакция из списка reactions

          //дополнительные параметры
          parameters = {
            dataField = "1" //ид поля для записи TID
            formId = "1" //ид формы
            badgeSearch = true //поиск по бейджу
            formList = ["49", "60"] //список ид полей, по всем формам
          }
        },
        {
          name = "Omnikey"
          device = "omnikey"
          format = "plainFormat" // формат из списка formats
          reaction = "AssignBarcode" // реакция из списка reactions

          //дополнительные параметры
          parameters = {
            dataField = "1" //ид поля для записи TID
            formId = "1" //ид формы
            badgeSearch = false //поиск по бейджу

          }
        }
      ]
    }
  }
}

akka {
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  loglevel = INFO
  log-config-on-start = off
  http.server.idle-timeout = infinite
  http.server.parsing.max-content-length = 20m

  actor {
    provider = "akka.remote.RemoteActorRefProvider"
    warn-about-java-serializer-usage = false
  }

  remote {
    log-sent-messages = on
    log-received-messages = on
    enabled-transports = ["akka.remote.netty.tcp"]
    netty.tcp {
      //здесь не трогать
      //hostname = "127.0.0.1"
      port = 0
      maximum-frame-size = 10M
    }
    server.message-frame-size = 10 MiB
    client.message-frame-size = 10 MiB
  }
}

blocking-dispatcher {
  executor = "thread-pool-executor"
  thread-pool-executor {
    core-pool-size-min    = 2
    core-pool-size-max    = 16
  }
}

